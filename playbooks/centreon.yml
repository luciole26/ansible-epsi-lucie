- name: Installation de Centreon sur Debian 11/12
  hosts: STG_HAPROXY
  gather_facts: true
  become: true

  tasks:
    - name: Update & Upgrade
      apt:
        update_cache: true
        upgrade: yes

    - name: Packages
      apt:
        name: 
        - lsb-release 
        - ca-certificates 
        - apt-transport-https 
        - software-properties-common 
        - wget 
        - gnupg2 
        - curl
        state: present

    - name: Install repository
      template:
        src: sury-php.list.j2
        dest: /etc/apt/sources.list.d/sury-php.list
    
    - name: Import the repository key
      apt_key: 
        url: https://packages.sury.org/php/apt.gpg
        state: present

